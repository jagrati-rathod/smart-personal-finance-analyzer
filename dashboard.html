<!DOCTYPE html>
<html>
<head>
<title>Dashboard | Finance Tracker</title>

<link rel="stylesheet" href="../css/style.css">

<script src="../js/storage.js"></script>
<script src="https://www.gstatic.com/charts/loader.js"></script>

</head>

<body>

<!-- NAVBAR -->
<nav class="navbar">
  <h2 class="logo">Finance Tracker</h2>
  <ul class="nav-links">
    <li><a href="dashboard.html" class="active">Dashboard</a></li>
    <li><a href="health.html">Health Concern</a></li>
    <li><a href="add-expense.html">Add Expense</a></li>
    <li><a href="set-budget.html">Set Budget</a></li>
    <li><a href="history.html">History</a></li>
    <li><a href="login.html">Logout</a></li>
  </ul>
</nav>

<div class="container">

<h1 class="dashboard-title">Dashboard Overview</h1>

<!-- SUMMARY CARDS -->
<div class="cards">

  <div class="card">
    Total Budget <br>
    ₹<span id="totalBudget">0</span>
  </div>

  <div class="card">
    Spent <br>
    ₹<span id="totalSpent">0</span>
  </div>

  <div class="card">
    Remaining <br>
    ₹<span id="remainingBudget">0</span>
  </div>

  <div class="card">
    Discipline Score <br>
    <span id="score">0</span> / 100
  </div>

</div>

<!-- SMART INSIGHT -->
<div class="chart-section">
  <h2 class="chart-title">Smart Insight</h2>
  <p id="insight"></p>
</div>

<!-- CHARTS -->
<div class="chart-section">
  <h2 class="chart-title">Expense Analysis</h2>
  <div id="piechart" style="width:100%; height:400px;"></div>
  <div id="barchart" style="width:100%; height:400px;"></div>
</div>

</div>

<script src="../js/googleCharts.js"></script>
<script src="../js/health.js"></script>

<script>

/* ===== FETCH DATA USING STORAGE.JS ===== */

const budget = getBudget()
const spent = calculateTotalSpent()

document.getElementById("totalBudget").innerText = budget
document.getElementById("totalSpent").innerText = spent
document.getElementById("remainingBudget").innerText = budget - spent

/* ===== DISCIPLINE SCORE ===== */

document.getElementById("score").innerText = calculateDisciplineScore()

/* ===== INVESTMENT INSIGHT ===== */

document.getElementById("insight").innerText = getInvestmentInsight()

/* ===== OVERSPENDING ALERT ===== */

if (spent > budget && budget > 0) {
  setTimeout(() => {
    alert("⚠️ Overspending detected!")
  }, 1000)
}

/* ===== HEALTH ALERT ===== */

const fastFood = getCategoryTotal("Fast Food")

if (fastFood > 2000) {
  setTimeout(() => {
    alert("⚠️ Health Alert: High fast food spending detected!")
  }, 1500)
}

</script>

</body>
</html>