<!DOCTYPE html>
<html>
<head>
<title>Dashboard | Finance Tracker</title>
<link rel="stylesheet" href="css/style.css">

<!-- Google Charts -->
<script src="https://www.gstatic.com/charts/loader.js"></script>

</head>

<body>

<!-- NAVBAR -->
<nav class="navbar">
  <h2 class="logo">Finance Tracker</h2>
  <ul class="nav-links">
    <li><a href="dashboard.html" class="active">Dashboard</a></li>
    <li><a href="health.html">Health Concern</a></li>
    <li><a href="add-expense.html">Add Expense</a></li>
    <li><a href="set-budget.html">Set Budget</a></li>
    <li><a href="history.html">History</a></li>
    <li><a href="login.html">Logout</a></li>
  </ul>
</nav>

<div class="container">

<h1 class="dashboard-title">Dashboard Overview</h1>

<!-- SUMMARY CARDS -->
<div class="cards">

  <div class="card">
    Total Budget <br>
    ₹<span id="totalBudget">0</span>
  </div>

  <div class="card">
    Spent <br>
    ₹<span id="totalSpent">0</span>
  </div>

  <div class="card">
    Remaining <br>
    ₹<span id="remainingBudget">0</span>
  </div>

</div>

<!-- CHARTS -->
<div class="chart-section">

  <h2 class="chart-title">Expense Analysis</h2>

  <div id="piechart" style="width:100%; height:400px;"></div>

  <div id="barchart" style="width:100%; height:400px;"></div>

</div>

</div>

<script src="js/storage.js"></script>
<script src="js/googleCharts.js"></script>
<script src="js/health.js"></script>

<script>

const expenses = getExpenses()
const budget = getBudget()

let spent = 0

expenses.forEach(e => spent += Number(e.amount))

document.getElementById("totalBudget").innerText = budget
document.getElementById("totalSpent").innerText = spent
document.getElementById("remainingBudget").innerText = budget - spent


/* SIMPLE AI ALERT SYSTEM */

if(spent > budget && budget > 0){
  setTimeout(()=>{
    alert("⚠️ AI Alert: You are overspending your budget!")
  },1000)
}

let fastFood = 0

expenses.forEach(e=>{
  if(e.category === "Fast Food"){
    fastFood += Number(e.amount)
  }
})

if(fastFood > 2000){
  setTimeout(()=>{
    alert("⚠️ Health Alert: High fast food spending detected!")
  },1500)
}

</script>

</body>
</html>